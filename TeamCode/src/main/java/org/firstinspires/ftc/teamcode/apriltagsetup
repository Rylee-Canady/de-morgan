/* 
 * 
 * Taken from the de-morgan repository @ https://github.com/Rylee-Canady/de-morgan/tree/master/TeamCode/src/main/java/org/firstinspires/ftc/teamcode
 * Find other functions and such relating to it at stated repo
 *
 */

//add these to the top of the file
import org.firstinspires.ftc.robotcore.external.hardware.camera.BuiltinCameraDirection;
import org.firstinspires.ftc.robotcore.external.hardware.camera.WebcamName;
import org.firstinspires.ftc.vision.VisionPortal;
import org.firstinspires.ftc.vision.apriltag.AprilTagDetection;
import org.firstinspires.ftc.vision.apriltag.AprilTagProcessor;
import java.util.List;

//put along your other hardware declarations
private HardwareDevice Webcam_1;

private AprilTagProcessor aprilTag;
private VisionPortal myVisionPortal;

//put with your other functions and call it at the start of your program in initialization 
private void initAprilTag() {
    aprilTag = new AprilTagProcessor.Builder().build();
    aprilTag.setDecimation(3);

    // Next, create a VisionPortal.Builder and set attributes related to the camera.
    myVisionPortal = new VisionPortal.Builder()
        .setCamera(hardwareMap.get(WebcamName.class, "Webcam 1"))
        .addProcessors(aprilTag)
        .build();
    }   // end initAprilTag


//telemetry for the apriltags put it with your other functions and call it when you want/ in the loop
private void telemetryAprilTag() {
        List<AprilTagDetection> currentDetections = aprilTag.getDetections();
        telemetry.addData("# AprilTags Detected", currentDetections.size());

        // Step through the list of detections and display info for each one.
        for (AprilTagDetection detection : currentDetections) {
            if (detection.metadata != null) {
                telemetry.addLine(String.format("\n==== (ID %d) %s", detection.id, detection.metadata.name));
                telemetry.addLine(String.format("XYZ %6.1f %6.1f %6.1f  (inch)", detection.ftcPose.x, detection.ftcPose.y, detection.ftcPose.z));
                telemetry.addLine(String.format("PRY %6.1f %6.1f %6.1f  (deg)", detection.ftcPose.pitch, detection.ftcPose.roll, detection.ftcPose.yaw));
                telemetry.addLine(String.format("RBE %6.1f %6.1f %6.1f  (inch, deg, deg)", detection.ftcPose.range, detection.ftcPose.bearing, detection.ftcPose.elevation));
            } else {
                telemetry.addLine(String.format("\n==== (ID %d) Unknown", detection.id));
                telemetry.addLine(String.format("Center %6.0f %6.0f   (pixels)", detection.center.x, detection.center.y));
            }
        }   // end for() loop

    }   // end method telemetryAprilTag()
